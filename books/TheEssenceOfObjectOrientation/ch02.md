# 01 이상한 나라의 객체



> 객체지향 패러다임은 지식을 추상화하고 추상화한 지식을 객체 안에 캡슐화함으로써 실세계 문제에 내재된 복잡성을 관리하려고 한다. 객체를 발견하고 창조하는 것은 지식과 행동을 구조화하는 문제다.
>
> - 레베카 워프스브록(Rebecca Wirfs-Brock)[Worfs-Brock 1990]



<br>



**어린 아기들이 물체를 인지하는 방법에 대한 실험**

- 심리학자인 "엘리자베스 스펠크"와 "필립 켈만" 은 어린 아기들이 물체를 인지하는 방법을 연구하기 위해 한 가지 실험을 수행.
- 인간이 태어나면서부터 가지고 있는 행동 방식에 기반을 둔 실험으로 "지루함" 의 기준으로 실험



<br>



**아기의  시선이 머무는 상대적인 시간을 기준**

- 한 곳을 바라보다 다른 곳으로 시선을 돌린다는 것은 지루함을 느낀다는 것을 의미
- 한 곳을 오랫동안 계속 쳐다보고 있다면 시선이 머무는 그곳에 무언가 놀라운 것이 존재한다는 것을 의미



<br>



**아기의 주의를 끌기 위한 한 개의 막대 그리고 두 개의 막대와 막대를 가리기 위한 가림막**

- 한 개의 막대와 두 개의 막대가 가림막에 의해 가려진 상태에 따라 아기가 바라보는 시간에 차이가 발생
- 인간이 선천적으로 타고난 인지 능력을 이용해 세상에 존재하는 다양한 객체를 식별하고 분류함으로써 세상을 이해
- 아기들 역시 뚜렷한 경계를 가진 객체들의 집합으로 세상을 바라본다는 것



<br>



## 객체지향과 인지 능력

- 객체지향 패러다임의 목적은 현실 세계를 모방하는 것이 아닌 현실 세계를 기반으로 새로운 세계를 창조하는 것
- 소프트웨어 세계에서 살아가는 객체는 현실 세계에 존재하는 객체와는 전혀 다른 모습을 보이는 것이 일반적
- 그 세계는 마치 토끼를 뒤쫓던 한 소녀가 경험한 이상한 나라만큼이나 낯설고 기묘



<br>



## 객체, 그리고 이상한 나라

### 이상한 나라의 앨리스

- 1862년 영국의 수학자 찰스 루트위지 도지슨(Charles Lutwidge Dodgson)에 의해 작성된 이상한 나라의 앨리스



<br>



**문의 높이가 40센티미터인 문을 지나야 되는 앨리스**

- 앨리스는 병 속의 액체를 마시고 24센티미터로 작아짐
- 케이크를 조금 베어 물자 머리가 천장에 닿을 만큼 앨리스의 몸이 커짐
- 부채질을 하자 앨리스의 몸이 서서히 작아지더니 60센티미터 정도의 크기로 작아짐
- 버섯을 먹어서 원래 몸의 크기로 되돌아옴



<br>



### 앨리스 객체

- 앨리스는 문을 통과하기 적당한 **상태**로 자신의 키를 지속적으로 변화
- 앨리스의 키를 변화시키는 것은 앨리스의 **행동**
- 어떤 행동의 성공 여부는 이전에 어떤 행동들이 발생했는지에 영향을 받는다는 사실을 **인지**해야 할 것
- 앨리스의 키가 작아지더라도 주변 사람들은 앨리스라고 부름. 즉, 앨리스는 상태 변경과 무관하게 유일한 존재로 **식별 가능**



<br>



**앨리스의 특징 요약**

- 앨리스는 상태를 가지며 상태는 변경 가능
- 앨리스의 상태를 변경시키는 것은 앨리스의 행동
  - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술이 가능
  - 행동의 순서가 결과에 영향을 미침
- 앨리스는 어떤 상태에 있더라도 유일하게 식별 가능



<br>



## 객체, 그리고 소프트웨어 나라

- 객체 설명에는 객체를 상태(state), 행동(behavior), 식별자(identity)를 지닌 실체로 보는 것이 가장 효과적

- > 객체란 식별 가능한 객체 또는 사물이다. 객체는 자동차처럼 만질 수 있는 사물일 수도 있고, 시간처럼 추상적인 개념일 수도 있다. 객체는 구별 가능한 식별자, 특정적인 행동, 변경 가능한 상태를 가진다. 소프트웨어 안에서 객체는 저장된 상태와 실행 가능한 코드를 통해 구현된다.



<br>



### 상태

**왜 상태가 필요한가**

- 객체가 주변 환경과의 상호작용에 어떻게 반응하는가는 그 시점까지 객체에 어떤 일이 발생했느냐에 좌우

- 예를 들어, 비행기 탑승 여부는 과거에 항공권 예약 여부에 따라 달라짐

- 어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다는 것
- 상태를 이용하면 과거에 얾매이지 않고 현재를 기반으로 객체의 행동 방식을 이해할 수 있음
- 상태는 근본적으로 세상의 복잡성을 완화하고 인지 과부하를 줄일 수 있는 중요한 개념



<br>



**상태와 프로퍼티**

- 앨리스, 음료, 케이크, 버섯, 부채, 토끼, 문 모두 객체이며 이들은 뚜렷한 경계를 가지며 식별 가능하고 상태와 행동을 지님
- 그러나 세상에 존재하는 모든 것들이 객체는 아니므로 객체의 영역에 포함시킬 수 없는 것들도 존재
- 앨리스의 "키"와 "위치"는 객체 아니며 음료와 케이크의 "양"과 문이 열려있는지 "여부"와 토끼가 달리는 "속도"는 객체가 아님
- 숫자, 문자열, 양, 속도, 날짜, 참/거짓과 같은 단순한 값들은 객체 아님
- 그 자체로 독립적인 의미를 가지기보다는 다른 객체의 특성을 표현하는  데 사용
- 단순한 값은 객체가 아니지만 객체의 상태를 표현하기 위한 중요한 수단



<br>



**앨리스의 상태**

- 앨리스의 키가 130cm, 위치는 "통로", 음료는 0.5리터를 가지고 있는 것을 **앨리스의 상태**

- 객체의 상태를 구성하는 모든 특징을 통틀어 객체의 **프로퍼티(property)**

- 앨리스의 키, 위치, 음료가 앨리스의 프로퍼티로 변경되지 않는 "정적"

- 프로퍼티 값(property value)은 시간이 흐름에 따라 변경되기 떄문에 "동적"

- 객체와 객체 사이의 의미 있는 연결을 **링크(Link)**

- 객체의 링크를 통해서만 메시지를 주고 받을 수 있음

- 객체 간의 선으로 표현되는 링크와 달리 객체를 구성하는 단순한 값은 **속성(attribute)**

- 객체의 프로퍼티는 단순한 값인 속성과 다른 객체를 가리키는 링크라는 두 가지 종료의 조합으로 표현이 가능

- > 상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징 표현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.

- 객체는 자율적인 존재임을 명심

- 객체지향의 세계에서 객체는 다른 객체의 상태에 직접적으로 접근할 수도, 상태를 변경할 수도 없음

- 자율적인 객체는 스스로 자신의 상태를 책임져야 함

- 직접적인 방법이 아닌 간접적으로 객체의 상태를 변경하너가 조회할 수 있는 방법이 필요

- 객체는 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지



<br>

## 행동

### 상태와 행동

객체가 취하는 행동은 객체 자신의 상태를 변경시킴
**객체의 행동에 의해 객체의 상태가 변경된다는 것은 행동이 부수 효과(side effect)를 초래**한다는 것을 의미함



<br>



**상태와 행동 사이의 관계**

- 객체의 행동은 상태에 영향을 받음
- 객체의 행동은 상태를 변경시킴



<br>



**행동을 서술하는 두 가지 관점**

- 상호작용이 현재의 상태에 어떤 방식으로 의존하는가
- 상호작용이 어떻게 현재의 상태를 변경시키는가



<br>



**객체의 행동으로 인해 발생하는 결과를 설명하는 두 가지 관점**

- 객체 자신의 상태 변경
- 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

객체가 다른 객체와 메시지를 통해서만 의사소통할 수 있다는 것을 기억할 것
객체가 어떤 행동을 하도록 만드는 것은 객체가 외부로부터 수신한 메시지



<br>



**객체의 행동이란**
 **외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동**이다. 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메시지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 함



<br>



**상태 캡슐화**
객체는 상태를 감춰둔 채 외부로 노출하지 않는다. 객체가 **외부에 노출하는 것은 행동**뿐이며, 
외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동임



<br>



**상태를 캡슐화해야 하는 이유?** 
상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만들기 때문임



<br>



## 식별자

**값(value)과 객체의 가장 큰 차이점**
값은 식별자를 가지지 않지만 객체는 식별자를 가진다는 점



<br>



값의 상태는 변하지 않기 때문에 **불변 상태(immutable state)**를 가진다고 말함
값의 경우 두 인스턴스의 상태가 같다면 두 인스턴스를 같은 것으로 판단함



<br>



객체는 시간에 따라 변경되는 상태를 포함하며 행동을 통해 상태를 변경함
따라서 객체는 **가변 상태(mutable state)**를 가진다고 말함



<br>



**동등성과 동일성**

- 동등성(equality) ⇒ 상태를 이용해 두 값이 같은지 판단할 수 있는 성질
- 동일성(identical) ⇒ 식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질



<br>



**객체의 식별자란**
**어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티**.
값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야 함
객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교 가능



<br>



## 객체의 특성

- 객체는 상태를 가지며 상태는 변경 가능
- 객체의 상태를 변경시키는 것은 객체의 행동
  - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술 가능
  - 행동의 순서가 실행 결과에 영향을 미침
- 객체는 어떤 상태에 있더라도 유일하게 식별 가능



<br>



## 버트란드 마이어의 기계로서의 객체 비유

쿼리와 명령

- 쿼리(query) ⇒ 일반적으로 객체의 상태를 조회하는 작업
- 명령(command) ⇒ 객체의 상태를 변경하는 작업

객체가 외부에 제공하는 행동의 대부분은 쿼리와 명령으로 구성됨

버트란드 마이어가 제시한 기계(=객체)의 사용자는 명령 버튼을 누르거나 조회 버튼을 눌러서 사용함
어떤 사용자도 직접 기계를 열어 기계 내부의 상태에 직접 접근하려고 하지 않음



<br>



## 행동이 상태를 결정한다

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 있어서 아래와 같은 나쁜 영향을 미침

1. 상태를 먼저 결정할 경우 캡슐화가 저해됨
2. 객체를 협력자가 아닌 고립된 섬으로 만듬
3. 객체의 재사용성이 저하됨



<br>



객체는 다른 객체와 협력하기 위해 존재한다. 객체의 행동은 객체가 협력에 참여하는 유일한 방법
따라서 **객체가 적합한지를 결정하는 것은 그 객체의 상태가 아니라 행동**

**어떤 책임이 필요한가를 결정하는 과정이 전체 설계를 주도해야 한다** 
책임 주도 설계는 협력이라는 문맥 안에서 객체의 행동을 생각하도록 도움으로써 응집도 높고 재사용 가능한 객체를 만들 수 있게 함



<br>



## 은유와 객체

**많은 사람들이 객체지향을 현실 세계의 모방 또는 추상화라고 생각**
그러나 객체지향 세계는 현실 세계의 단순한 모방이 아닌 전혀 다른 세계



<br>



**현실 속의 객체와 소프트웨어 객체 사이의 가장 큰 차이점**
현실 속에서는 수동적인 존재일지라도 소프트웨어 객체로 구현될 때는 능동적으로 변한다는 것



<br>



**객체지향 세계와 현실 세계는 전혀 상관이 없는 것**
상관이 없지는 않지만 모방이나 추상화보다 현실 세계와 객체지향 세계 사이의 관계를 좀 더 정확하게 설명할 수 있는 단어는 **은유(metaphor)**

